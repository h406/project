//==============================================================================
//
// gauge[gauge.cpp]
// Author : masato masuda : 2015/10/21
//
//==============================================================================

//******************************************************************************
// include
//******************************************************************************
#include "gauge.h"

//==============================================================================
// init
//------------------------------------------------------------------------------
bool Gauge::init(void)
{
  _gaugeBase = Sprite2D::create();
  _gaugeBase->setColor(D3DXCOLOR(0.0f, 0.0f, 0.0f, 0.6f));
  this->addChild(_gaugeBase);

  _gauge = Sprite2D::create();
  this->addChild(_gauge);

  _rate = 0.0f;
  _flip = 1.0f;

  return true;
}

//==============================================================================
// update
//------------------------------------------------------------------------------
void Gauge::update(void)
{
  _rate += (_rateDest - _rate) * 0.1f;

  Vec3 gaugeScl(_rate * _scl.x, _scl.y, _scl.z);
  Vec3 gaugePos(_pos.x - ((_scl.x * 0.5f) * _flip) + ((gaugeScl.x * 0.5f) * _flip), _pos.y, 0.0f);

  _gauge->setPos(gaugePos);
  _gauge->setScl(gaugeScl);

  _gaugeBase->setPos(_pos);
  _gaugeBase->setScl(_scl);
}

//==============================================================================
// uninit
//------------------------------------------------------------------------------
void Gauge::uninit(void)
{
}

//EOF
