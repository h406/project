//==============================================================================
//
// gauge[gauge.cpp]
// Author : masato masuda : 2015/10/21
//
//==============================================================================

//******************************************************************************
// include
//******************************************************************************
#include "gauge.h"

//==============================================================================
// init
//------------------------------------------------------------------------------
bool Gauge::init(float width,float height)
{
  _gaugeBase = Sprite2D::create();
  _gaugeBase->setColor(D3DXCOLOR(0.0f, 0.0f, 0.0f, 0.6f));
  _gaugeBase->setSize(width, height);
  this->addChild(_gaugeBase);

  _gauge = Sprite2D::create();
  _gauge->setSize(width,height);
  this->addChild(_gauge);

  _rate = 0.0f;
  _flip = 1.0f;

  return true;
}

//==============================================================================
// update
//------------------------------------------------------------------------------
void Gauge::update(void)
{
  const float width = _gaugeBase->getScl().x;
  _rate += (_rateDest - _rate) * 0.1f;

  _gauge->setPosX(((_rate * width * 0.5f) * _flip) - ((width * 0.5f) * _flip));
  _gauge->setSizeW(_rate * width);
}

//==============================================================================
// uninit
//------------------------------------------------------------------------------
void Gauge::uninit(void)
{
}

//EOF
